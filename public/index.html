<!DOCTYPE html>
<html ng-app="app">
<head lang="en">
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="less/navicoon.css"/>
    <link rel="stylesheet" type="text/css" href="../lib/semantic-ui/semantic.min.css">
    <link rel="stylesheet" type="text/css" href="less/style.css"/>
    <script src="../lib/jquery/jquery-2.1.4.min.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
    <title></title>

</head>
<body>
<header>
    <div id="bovenbar">
        <div class="hamburger">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <img id="logo" src="images/logo.png" >
        <div class="ui floating labeled icon dropdown button" id="rechterheader" ng-controller="userController">
            <i class="user icon"></i>
            <span class="text" id="user">{{ currentUser.local.voornaam || "user" }} </span>
            <input type="hidden" value="{{ currentUser._id }}" id="hiddenuserid">
            <div class="menu">
                <div class="item" ng-show="loggedIn">
                    <i class="ticket icon"></i>
                    <a href="/mytickets">My Tickets</a>
                </div>
                <div class="item" ng-show="loggedIn">
                    <i class="exchange icon"></i>
                    <a href="/mytraded">My Trades</a>
                </div>
                <div class="item" ng-show="loggedIn">
                    <i class="sign out icon"></i>
                    <a href="/logout">Sign Out</a>
                </div>

                <div class="item" ng-hide="loggedIn">
                    <i class="sign in icon"></i>
                    <a href="/login">Sign In</a>
                </div>
                <div class="item" ng-hide="loggedIn">
                    <i class="add user icon"></i>
                    <a href="/signup">Register</a>
                </div>
            </div>
        </div>
    </div>
    <div class="zijmenu">
        <!-- Menu -->
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/werking">Werking</a></li>
            <li><a href="/overzichttickets">Browse Tickets</a></li>
            <li><a href="/mytickets">My tickets</a></li>
            <li><a href="/ticketregistreren">Add ticket</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
    </div>
    <h1 class="grotewittetitel">Trade all kinds of tickets with others</h1>
    <button class="ui inverted orange button" id="getstartedbtn">Start trading now <i class="right arrow icon"></i></button>
</header>
<section id="wrapper">
    <h1>Last posted tickets</h1>
    <table>
        <thead>
        <tr>
            <th>Title</th>
            <th>Sort</th>
            <th>Price</th>
            <th>Amount</th>
            <th>Owner</th>
            <th>Trade</th>
        </tr>
        </thead>
        <tbody ng-controller="ticketController">

            <tr ng-repeat="ticket in tickets">
                <td>{{ ticket.title }}</td>
                <td>{{ ticket.sort }}</td>
                <td>{{ ticket.price }}</td>
                <td>{{ ticket.amount }}</td>
                <td>{{ ticket.owner }}</td>
                <td><a href="/overzichttickets/{{ticket._id}}"><i class="right arrow icon"></i></a></td>
            </tr>


        </tbody>
    </table>


</section>

<script src="js/navnavigatie.js"></script>
<script src="js/semanticinits.js"></script>
<script src="./lib/angular/angular.js"></script>
<script src="./lib/angular/angular-cookies.js"></script>
<script src="../lib/semantic-ui/semantic.min.js"></script>
<script src="controllers/clientTicketController.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io.connect();
    socket.on("connect",function(){
        console.log("connected");
    });

    socket.on("disconnect",function(){
        console.log("disconnected");
    });

    socket.on("testtraderequest",function(msg){
        var ticketEigenNaam = msg[0];
        var ticketSellerID = msg[1];
        var hiddenUserId = document.getElementById("hiddenuserid").value;
        if(hiddenUserId == ticketSellerID)
        {
            console.log("ze zijn gelijk");
        }
        else{
            console.log("blabla");
        }

        $('body').append("<div class='ui cards' id='notdiv'><div class='card'> <div class='content'><div class='header'><i class='user icon'></i>"+ticketEigenNaam+"</div><div class='description'>"+ticketEigenNaam+" requested to trade a ticket with you</div></div> <div class='extra content'><div class='ui two buttons'><div class='ui basic green button'>Approve</div>< <div class='ui basic red button'>Decline</div>/div></div></div></div>");

    });

</script>
</body>
</html>